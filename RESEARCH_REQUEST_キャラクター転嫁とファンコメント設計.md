# 🔬 リサーチ依頼書：CANDY虎太郎コメント生成システムの進化

## 1. 背景と目的

Qwen2.5-VL（7B）+ Qwen2.5（7B-instruct）を使用した画像認識→コメント生成システム「Kotaro-Engine」において、**キャラクター「CANDY虎太郎」らしさ**を引き出し、**ファンが喜ぶコメント**を自動生成する精度を向上させたい。

---

## 2. 現状の問題点（具体例付き）

### 問題① VLM（画像認識）の出力がコス偏重

**期待する出力:**
```
①はにかんだ笑顔が最高
②ピースサインがかわいい  
③猫耳が印象的
```

**実際の出力（問題あり）:**
```
①青系
②ニコニコ笑顔
③青系黒系着飾りヘア Cable超カッコいい✨
```

**問題点:**
- 「表情」「仕草」よりも「衣装の色」に注目してしまう
- 意味不明な文字列（「Cable」など）が混入
- 背景と前景を混同（帽子の色→背景色と誤認）

---

### 問題② 生成コメントが機械的・無個性

**CANDY虎太郎の実際の投稿（リファレンス）:**
```
・笑顔がすてき❤
・目がほんと素敵❤
・透明感つよすぎて光になるレベル…✨
・ニコっとした表情に ほんと癒されますね😍
・圧倒的に可愛すぎ…✨
```

**現在のシステム出力（問題あり）:**
```
・白系コスめっちゃ似合ってる✨撮れて嬉しい！📸
・青系黒系着飾りヘア Cable超カッコいい✨
・ピンク青？？（意味不明）
```

**問題点:**
- 「コス」の話ばかりで、**人物の魅力**に触れていない
- 虎太郎の**語彙・トーン**が再現されていない
- 時に意味不明な出力が発生

---

### 問題③ キャラクター「らしさ」の欠如

**CANDY虎太郎の特徴（分析結果）:**

| 要素 | 虎太郎スタイル | 現在のシステム |
|------|--------------|--------------|
| 語尾 | 「❤」「✨」「😍」 | ❌ 「📸」が多い |
| 表現 | 「すてき」「素敵」「癒される」 | ❌ 「最高！」「神！」が多い |
| 視点 | 表情・雰囲気・透明感 | ❌ コス・衣装・色 |
| 長さ | 10〜20文字でシンプル | ❌ 無理やり22文字にしている |

---

## 3. 調査してほしいポイント

### 🔍 調査項目A：キャラクター転嫁（ペルソナインジェクション）

**質問:**
- LLMに特定のキャラクターを「演じさせる」ための効果的なプロンプト設計は？
- Few-shot Exampleの最適な数と構成は？
- キャラクターの「語彙」「トーン」「視点」をどうプロンプトに反映すべきか？
- ファインチューニングなしでキャラクター再現度を上げる方法は？

**参考資料:**
- `C:\AI\APP\X-AUTO-POST-SYSTEM-otakuDJ\Xpost-EX\COMMNET-EX.txt`（虎太郎の実際のコメント集）

---

### 🔍 調査項目B：ファンが喜ぶコメントの設計

**質問:**
- SNS（特にX/Twitter）で「いいね」がつきやすいコメントの特徴は？
- コスプレ写真/ポートレートへの「良いコメント」の共通パターンは？
- 「キュン」とさせる言い回しの心理学的な分析は？
- モデル・被写体が嬉しいと感じるコメントの要素は？

---

### 🔍 調査項目C：VLMの画像認識精度向上

**質問:**
- 「表情」「仕草」を優先的に認識させるプロンプトエンジニアリングは？
- 背景と前景の混同を防ぐ指示方法は？
- Qwen2.5-VLの特性と最適なプロンプト形式は？
- ハルシネーション（意味不明出力）を抑制するtemperature/top_p設定は？

---

### 🔍 調査項目D：Qwen2.5モデルの特性活用

**質問:**
- Qwen2.5-7B-Instructの日本語生成における特性は？
- 短文生成（10〜22文字）に最適なパラメータは？
- 絵文字を自然に使わせるためのプロンプト設計は？
- 禁止ワードを確実に避けさせる方法は？

---

## 4. 期待するアウトプット

リサーチ後、以下を出力してほしい：

1. **プロンプト設計ガイドライン**
   - VLM用プロンプトの最適化案
   - コメント生成用プロンプトの最適化案

2. **キャラクター再現のためのプロンプトテンプレート**
   - CANDY虎太郎のペルソナ定義
   - Few-shot Example集

3. **パラメータ推奨設定**
   - temperature, top_p, max_tokens の推奨値

---

## 5. 現在のシステム構成

```
[画像] 
   ↓
[Qwen2.5-VL 7B] ← VLMプロンプト（表情・仕草優先）
   ↓
[画像特徴テキスト]
   ↓
[Qwen2.5 7B-instruct-q4_K_M] ← コメント生成プロンプト
   ↓
[18〜22文字のコメント]
```

---

## 6. 参照データ

| ファイル | 内容 |
|---------|------|
| `Xpost-EX/COMMNET-EX.txt` | 虎太郎の実際のコメント集（約100件） |
| `Xpost-EX/2025-11-*.pdf` | 実際のX投稿スクリーンショット |
| `Xpost-EX/2025-12-*.pdf` | 実際のX投稿スクリーンショット |
| `kotaro_api.py` | 現在のプロンプト設計 |

---

## 7. 成功基準

- VLMが「表情」「仕草」を正確に認識する
- 生成コメントがCANDY虎太郎の語彙・トーンを再現する
- ファンが見て「キュン」とする、楽しいコメントになる
- 意味不明な出力がゼロになる

---

**調査よろしくお願いします！** 🐯✨
